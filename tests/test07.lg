use std

var offset: [int] = [4,4]
var tile_size: int = 4
var player: [int] = [3,3]
var map: [[int]] = [
  [1,1,1,1,1,1,1,1],
  [1,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,1],
  [1,1,1,1,1,1,1,1]
]

def draw_map() do
  for y = 0 to len(map) do
    for x = 0 to len(map[y]) do
      if map[y][x] == 1 do
        pset(x + offset[0], y + offset[1], #444444)
      else
        pset(x + offset[0], y + offset[1], #ffffff)
      end
    end
  end
end

def draw_player() do
  pset(player[0] + offset[0], player[1] + offset[1], #990000)
end

def update() do
  if buttonp(Key.Left) do
    player[0] = clamp(player[0] - 1, 1, 6)
  end
  if buttonp(Key.Right) do
    player[0] = clamp(player[0] + 1, 1, 6)
  end
  if buttonp(Key.Up) do
    player[1] = clamp(player[1] - 1, 1, 6)
  end
  if buttonp(Key.Down) do
    player[1] = clamp(player[1] + 1, 1, 6)
  end
end

def draw() do
  clear()
  draw_map()
  draw_player()
end
